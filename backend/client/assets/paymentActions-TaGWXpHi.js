import{a as r}from"./index-BuJDhg32.js";const s="https://ghar-mitra-backend.onrender.com",c=async(o,e)=>{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");console.log(o,e);const a={headers:{Authorization:`Bearer ${t}`}};try{const n=await r.post(`${s}/payments/${o}/add`,e,a);return console.log(n),alert("Payment successfully added!"),n.data}catch(n){throw n.response?n.response.data:new Error("Network error")}},y=async()=>{const o=localStorage.getItem("token");if(!o)throw new Error("No token found");const e={headers:{Authorization:`Bearer ${o}`}},t=await r.get(`${s}/payments/history`,e);return console.log(t),console.log(t.data),t.data},E=async o=>{console.log(o);const e=localStorage.getItem("token");if(!e)throw new Error("No token found");const t={headers:{Authorization:`Bearer ${e}`}};return(await r.get(`${s}/payments/${o}/history`,t)).data},l=(o,e)=>async t=>{t({type:"ADD_PAYMENT_REQUEST"});try{const a=await c(o,e);t({type:"ADD_PAYMENT_SUCCESS",payload:a})}catch(a){t({type:"ADD_PAYMENT_FAILURE",payload:a.message})}},T=()=>async o=>{o({type:"FETCH_PAYMENT_HISTORY_REQUEST"});try{const e=await y();o({type:"FETCH_PAYMENT_HISTORY_SUCCESS",payload:e})}catch(e){o({type:"FETCH_PAYMENT_HISTORY_FAILURE",payload:e.message})}},_=o=>async e=>{e({type:"FETCH_STUDENT_PAYMENTS_REQUEST"});try{const t=await E(o);console.log(o),e({type:"FETCH_STUDENT_PAYMENTS_SUCCESS",payload:t})}catch(t){e({type:"FETCH_STUDENT_PAYMENTS_FAILURE",payload:t.message})}};export{l as a,T as b,_ as f};
