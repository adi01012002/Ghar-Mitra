import{r as o,d as j,b as v,u as N,c as g,j as e,L as w}from"./index-BuJDhg32.js";import{f as S,u as C,a as E}from"./studentActions-qDPuK1vQ.js";import{a as k}from"./authActions-DRkeMNWP.js";import{F as A,a as q,c as F}from"./index-BjIWKf-m.js";import{f as D}from"./pgActions-C-z61Hju.js";const O=()=>{const[x,p]=o.useState(!1),{id:r}=j(),n=v(),d=N(),{student:t,loading:i}=g(a=>a.students),{pgs:c}=g(a=>a.pg||{}),[s,u]=o.useState({username:"",age:"",email:"",address:"",phone:"",year:"",password:"",pgId:""});o.useEffect(()=>{n(D())},[n]),o.useEffect(()=>{r&&n(S(r))},[n,r]),o.useEffect(()=>{t&&r&&u({username:t.username||"",age:t.age||"",email:t.email||"",address:t.address||"",phone:t.phone||"",year:t.year||"",password:"",pgId:t.pgId||""})},[t,r]);const l=a=>{const{name:h,value:f}=a.target;u(y=>({...y,[h]:f}))},m=()=>{n(k()),d("/")},b=a=>{a.preventDefault(),r?(n(C(r,s)),d(`/student/${r}`)):(console.log(s),n(E(s)),d("/auth/dashboard"))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-100 to-white",children:[e.jsxs("nav",{className:"flex items-center justify-between bg-white px-8 py-4 shadow-md border-b border-purple-200",children:[e.jsx(w,{to:"/auth/dashboard",className:"flex items-center gap-2",children:e.jsx("h1",{className:"text-4xl font-extrabold mb-4 text-purple-600 tracking-tight text-center",children:"Ghar Mitra ðŸ¡ðŸ¤"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:"flex items-center space-x-2 focus:outline-none",onClick:()=>p(a=>!a),children:[e.jsx(A,{className:"text-3xl text-purple-600"}),e.jsx(q,{className:"text-gray-500 ml-1"})]}),x&&e.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-xl shadow-lg z-50",children:e.jsxs("button",{className:"w-full flex items-center px-4 py-2 hover:bg-purple-100 text-gray-800",onClick:m,children:[e.jsx(F,{className:"mr-2"})," Logout"]})})]})]}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f7f5ff]",children:e.jsxs("div",{className:"w-full max-w-3xl bg-white border border-gray-400 rounded-3xl shadow-2xl p-16",children:[e.jsx("h2",{className:`text-4xl font-bold mb-6 text-gray-900 text-center ${r?"text-green-700":"text-purple-700"}`,children:r?"Update Student Details":"Add Student"}),e.jsxs("form",{className:"space-y-12",onSubmit:b,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-16 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-1",children:"Username"}),e.jsx("input",{type:"text",name:"username",value:s.username,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900 bg-gray-50 placeholder-gray-400 transition-all",placeholder:"Enter username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-1",children:"Age"}),e.jsx("input",{type:"number",name:"age",value:s.age,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900 bg-gray-50 placeholder-gray-400 transition-all",placeholder:"Enter age"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900 bg-gray-50 placeholder-gray-400 transition-all",placeholder:"Enter email"})]}),e.jsx("div",{children:r?null:e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-1",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900 bg-gray-50 placeholder-gray-400 transition-all",placeholder:"Enter password"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-1",children:"Year"}),e.jsx("input",{type:"text",name:"year",value:s.year,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900 bg-gray-50 placeholder-gray-400 transition-all",placeholder:"Enter year"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-1",children:"Address"}),e.jsx("input",{type:"text",name:"address",value:s.address,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900 bg-gray-50 placeholder-gray-400 transition-all",placeholder:"Enter address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-1",children:"Phone"}),e.jsx("input",{type:"text",name:"phone",value:s.phone,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900 bg-gray-50 placeholder-gray-400 transition-all",placeholder:"Enter phone"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 mb-1",children:"PG"}),e.jsxs("select",{name:"pgId",value:s.pgId,onChange:l,required:!0,disabled:i,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-900 bg-gray-50 placeholder-gray-400 transition-all",children:[e.jsx("option",{value:"",children:"Select PG"}),Array.isArray(c)&&c.length>0?c.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id)):e.jsx("option",{disabled:!0,children:"Loading PGs..."})]})]})]})]}),e.jsx("button",{type:"submit",disabled:i,className:`w-full py-3 px-4 rounded-xl text-white font-bold text-lg shadow-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 mt-4 ${r?"bg-green-600 hover:bg-green-700 focus:ring-green-500":"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500"}`,children:i?r?"Updating...":"Adding...":r?"Update Student":"Add Student"})]})]})})]})})};export{O as default};
